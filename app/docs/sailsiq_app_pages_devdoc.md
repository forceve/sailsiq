# SailSIQ App 页面开发文档

> 本文档基于 `sailsiq_app_devdoc.md` 拆解整理，旨在明确 MVP 阶段需要开发的页面清单及详细设计要求。

## 1. 页面清单 (Page List)

MVP 阶段主要包含以下 5 个核心页面/视图：

1.  **Home / Sessions List** (首页/场次列表)
2.  **New Session** (新建场次 - 导入或画板)
3.  **Replay Workspace** (复盘工作台 - 核心页面)
4.  **Export / Share** (导出与分享)
5.  **Settings** (设置)

---

## 2. 详细页面设计 (Detailed Specifications)

### 2.1 Home / Sessions List (首页)

**功能定位**：应用入口，管理历史场次记录，快速发起新复盘。

**核心 UI 元素**：
*   **顶部导航栏**：
    *   应用 Logo/标题。
    *   设置入口 (Settings icon)。
*   **操作区**：
    *   **新建按钮 (Primary Action)**：醒目的 "New Session" 按钮。
    *   **搜索/筛选栏**：支持按名称、日期搜索场次。
*   **Session 列表区 (场次列表)**：
    *   **Session Card (场次卡片)**：
        *   标题 (Name)
        *   日期 (Date)
        *   地点 (Location)
        *   来源标识 (Imported / Manual)
        *   关键指标概览 (如：时长、标注数量)
    *   **状态视图**：
        *   **Empty State**：无记录时的占位图 + 引导文案 + 导入示例数据按钮。
        *   **Loading State**：骨架屏加载效果。
        *   **Error State**：加载失败提示。
*   **快捷入口 (可选)**：
    *   最近打开 (Recently Opened)。
    *   示例数据 (Example Data) - 方便新用户体验。

### 2.2 New Session (新建场次)

**功能定位**：创建新的复盘项目，处理数据导入与解析。

**核心 UI 元素**：
*   **基本信息表单**：
    *   **Session Name**：输入框 (必填，场次名称)。
    *   **Date**：日期选择器 (支持从文件自动提取)。
    *   **Location**：地点输入 (支持从 GPS 自动识别)。
    *   **Boat / Team**：船型或队伍名称 (选填)。
    *   **Project**：所属项目选择 (选填，用于分组)。
*   **创建方式选择 (Tabs/Cards)**：
    *   **方式 A：导入数据 (默认)**
        *   **文件上传区**：支持拖拽上传 `.gpx` 或 `.bin` 文件。
        *   **解析预览**：
            *   显示解析状态 (Success/Fail)。
            *   字段健康度检查 (Time, Lat, Lon, Speed, Heading, Wind)。
            *   缺失字段提示 (Warning，非 Error，不阻塞)。
            *   简单的轨迹缩略图预览。
    *   **方式 B：画板模式**
        *   明确的切换入口，说明用于“手动绘制复盘”。
*   **底部操作栏**：
    *   "Cancel" 按钮。
    *   "Create Session" / "Start" 按钮 (解析成功后高亮)。

### 2.3 Replay Workspace (复盘工作台)

**功能定位**：核心交互页面，承载地图回放、数据分析、教学标注功能。建议优先适配桌面/宽屏布局。

**布局结构**：
*   **左侧：侧边栏 (Sidebar)**
*   **中间：地图画板 (Canvas)**
*   **右侧：数据面板 (Charts & Stats)**
*   **底部：时间轴控制栏 (Timeline)**

**各区域详细设计**：

#### A. 左侧侧边栏 (Events & Marks)
*   **Tab 切换**：Events (事件) / Marks (航标)。
*   **Events 列表**：
    *   显示已添加的时间轴事件 (标注)。
    *   点击列表项跳转时间轴。
    *   显示事件类型/备注文本。
*   **Marks 列表**：
    *   管理地图上的固定点 (Start, Marks, Finish)。
    *   支持重命名、删除、定位。

#### B. 中间地图画板 (Map Canvas)
*   **底图控制**：矢量地图 / 卫星地图切换开关。
*   **交互层**：
    *   **轨迹线 (Polyline)**：支持渐进绘制 (根据时间进度显示)。
    *   **船位点 (Boat Indicator)**：当前时间点的船只位置与朝向。
    *   **航标 (Marks)**：支持拖拽添加/移动位置。
    *   **风场指示 (Wind)**：全局风向箭头 (支持手动输入/调整风向风速)。
*   **工具浮窗 (Toolbar)**：
    *   截图 (Snapshot)。
    *   添加事件 (Add Event)。
    *   添加航标 (Add Mark)。

#### C. 右侧数据面板 (Charts & Stats)
*   **统计卡片 (Stats Cards)** (可折叠)：
    *   Duration (时长)
    *   Distance (距离)
    *   Avg Speed / Max Speed
    *   Turn Count (转向次数)
*   **图表区 (Charts)**：
    *   **Speed Chart**：速度随时间变化曲线。
    *   **Heading Chart**：航向随时间变化曲线。
    *   **Turn Rate Chart** (可选)。
    *   **交互**：鼠标悬停显示数值，点击曲线跳转对应时间点 (与 Timeline 联动)。

#### D. 底部时间轴 (Timeline)
*   **播放控制**：
    *   Play / Pause 按钮。
    *   跳转按钮：-10s, +10s, -30s, +30s。
*   **进度条**：
    *   可拖拽滑块。
    *   显示当前时间 / 总时间。
    *   时间轴上显示事件标记点 (Event Markers)。
*   **倍速控制**：
    *   滑块或下拉选：1x - 10x (0.1x 步进)。

### 2.4 Export / Share (导出与分享)

**功能定位**：生成交付物。

**核心 UI 元素**：
*   **导出类型选择**：
    *   **PDF 报告**：包含轨迹图、统计数据、事件列表及截图。
    *   **Share Link**：生成只读的 Web 浏览链接。
    *   **Video Overlay Assets**：(MVP 特色) 导出透明背景的仪表盘视频组件 (MP4/WebM)，用于视频剪辑。
*   **预览区**：
    *   所选导出格式的实时/静态预览。
    *   选项勾选：是否包含事件、是否包含截图等。
*   **状态反馈**：
    *   导出进度条。
    *   成功提示 / 下载链接。

### 2.5 Settings (设置)

**功能定位**：全局偏好设置与隐私管理。

**核心 UI 元素**：
*   **Data & Privacy**：
    *   数据收集开关 (Opt-in)。
    *   匿名化说明。
    *   隐私条款链接。
*   **Preferences**：
    *   单位设置：速度 (knots / km/h / m/s)，距离 (nm / km / m)。
    *   时间格式设置。
*   **Account** (占位)：
    *   登录/用户信息 (MVP 阶段可能仅为本地存储或简单占位)。
    *   App 版本 / 固件版本信息。

---

## 3. 设计检查清单 (Design Checklist)

在开发/UI设计时请核对以下点：

*   [ ] **响应速度**：导入 GPX 后是否能在 10 秒内渲染出轨迹并准备好回放？
*   [ ] **布局合理性**：工作台的 Canvas 是否占据了主要视觉区域？图表是否会遮挡地图关键信息？
*   [ ] **联动性**：点击右侧图表的波峰/波谷，时间轴和地图船位是否同步跳转？
*   [ ] **标注效率**：添加一个事件标注的操作步骤是否在 2 次点击以内 (例如：点击时间轴/地图 -> 输入备注 -> 确认)？
*   [ ] **缺失处理**：导入数据缺少 Heading 或 Wind 时，UI 是否有清晰的 N/A 占位或手动输入引导，而不是报错崩溃？
